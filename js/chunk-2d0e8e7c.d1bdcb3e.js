(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e8e7c"],{"8aeb":function(t,e,i){"use strict";i.r(e),i.d(e,"LoginForm",(function(){return m}));var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"login-page"},[o("div",{staticClass:"login-box"},[o("div",{staticClass:"box"}),o("form",{attrs:{method:"post",name:"login",id:"login"}},[t._m(0),t._m(1),o("div",{staticClass:"l-login"},[o("div",{staticClass:"logo"}),o("h1",[t._v("芝蔴街e學園 學生登入平台")]),o("div",{staticClass:"input-box"},[o("i",{staticClass:"fa fa-user"}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.account,expression:"loginForm.account"}],staticClass:"input-sty required",attrs:{type:"text",name:"account",id:"account",placeholder:"Username",autocomplete:"off"},domProps:{value:t.loginForm.account},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"account",e.target.value)}}})]),o("div",{staticClass:"input-box"},[o("i",{staticClass:"fa fa-lock"}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.password,expression:"loginForm.password"}],staticClass:"input-sty required",attrs:{type:"password",name:"password",id:"password",placeholder:"Password",autocomplete:"off"},domProps:{value:t.loginForm.password},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"password",e.target.value)}}})]),o("div",{staticClass:"input-box input-number h-flexCenter-ai"},[o("img",{staticClass:"val-img",attrs:{id:"getCode",src:t.verificationCode.imgSrc}}),o("img",{staticClass:"refresh",attrs:{id:"refresh",src:i("28c0"),disabled:t.doubleClick},on:{click:function(e){return e.preventDefault(),t.refreshVerificationCode()}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.verification,expression:"loginForm.verification"}],staticClass:"input-code code required",attrs:{type:"text",placeholder:"輸入驗證碼",maxlength:4,name:"code_num",id:"code_num"},domProps:{value:t.loginForm.verification},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"verification",e.target.value)}}})]),o("div",{staticClass:"l-login-error-mesg",attrs:{id:"err_msg"}},[o("i",{directives:[{name:"show",rawName:"v-show",value:""!==t.errorMsg.form,expression:"errorMsg.form !== ''"}],staticClass:"fa fa-exclamation-circle"}),t._v(t._s(t.errorMsg.form))]),o("div",{staticClass:"l-login-btn-box"},[o("a",{staticClass:"btn login-submit-btn",attrs:{disabled:t.doubleClick},on:{click:function(e){return e.preventDefault(),t.validateAndSubmit()}}},[t._v("登入")])]),o("div",{staticClass:"l-login-footer"},[t._v(" ©2021 芝蔴街e學園 ")]),t._m(2)])])])])])},r=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login_dec02"},[o("img",{attrs:{src:i("2b89")}})])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login_dec03"},[o("img",{attrs:{src:i("57d9")}})])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"dec login_dec01"},[o("img",{attrs:{src:i("8472")}})])}],s=i("9ab4"),a=i("1b40"),n=i("87d7"),c=i("f2fa"),l=i("c00b"),d=i("43e4"),u=i("93f3"),f=i("0d59"),m=function(){function t(){this.account="",this.password="",this.verification=""}return Object(s["b"])([Object(n["a"])(),Object(c["a"])(),Object(l["a"])(50)],t.prototype,"account",void 0),Object(s["b"])([Object(n["a"])(),Object(c["a"])(),Object(l["a"])(50)],t.prototype,"password",void 0),Object(s["b"])([Object(n["a"])(),Object(c["a"])()],t.prototype,"verification",void 0),t}(),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.doubleClick=!1,e.loginForm=new m,e.verificationCode={uid:"",imgSrc:""},e.errorMsg={form:"",response:""},e.error="",e}return Object(s["c"])(e,t),e.prototype.created=function(){this.refreshVerificationCode()},e.prototype.refreshVerificationCode=function(){return Object(s["a"])(this,void 0,void 0,(function(){var t,e,i,o;return Object(s["d"])(this,(function(r){switch(r.label){case 0:return this.doubleClick?[3,2]:(this.doubleClick=!0,t=Math.floor(Date.now()/1e3).toString(),e=Math.floor(1e3*Math.random()).toString(),this.verificationCode.uid=t+e,i={uniqueID:this.verificationCode.uid},o=this.verificationCode,[4,f["a"].refreshCodeImg(i)]);case 1:o.imgSrc=r.sent(),this.doubleClick=!1,r.label=2;case 2:return[2]}}))}))},e.prototype.validateAndSubmit=function(){return Object(s["a"])(this,void 0,void 0,(function(){var t=this;return Object(s["d"])(this,(function(e){return Object(d["a"])(this.loginForm,{skipMissingProperties:!0}).then((function(e){return Object(s["a"])(t,void 0,void 0,(function(){var t,i,o,r,a,n,c=this;return Object(s["d"])(this,(function(s){switch(s.label){case 0:return 0!==e.length?(t={account:"帳號",password:"密碼",verification:"驗證碼"},this.errorMsg.form="請填入",e.forEach((function(e,i){c.errorMsg.form+=0===i?t[e.property]:" / "+t[e.property]})),[2]):(this.errorMsg.form="",this.doubleClick?[3,3]:(this.doubleClick=!0,i={code:this.loginForm.verification,uniqueID:this.verificationCode.uid},[4,f["a"].verificationCodeCheck(i)]));case 1:return o=s.sent(),o!==u["a"].Success?(this.errorMsg.form=u["b"][o],this.doubleClick=!1,this.refreshVerificationCode(),[2]):(r={acc:this.loginForm.account,pwd:this.loginForm.password},[4,f["a"].stUserLogin(r)]);case 2:a=s.sent(),a.ERR_CODE===u["a"].Success?(n=a.info,window.localStorage.setItem("studentToken",a.auth),window.localStorage.setItem("student_stid",n.stid),window.localStorage.setItem("student_name",n.name),this.doubleClick=!1,this.$router.push("/student/student")):(this.errorMsg.form=u["b"][a.ERR_CODE],this.refreshVerificationCode(),this.doubleClick=!1),s.label=3;case 3:return[2]}}))}))})),[2]}))}))},e=Object(s["b"])([a["a"]],e),e}(a["d"]),v=p,g=(i("f7c1"),i("2877")),h=Object(g["a"])(v,o,r,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0e8e7c.d1bdcb3e.js.map